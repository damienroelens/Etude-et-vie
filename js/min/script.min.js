function initialize(){function e(e){n[e].addEventListener("click",addToCart,!1)}for(var n=document.getElementsByClassName("buy"),t=0;t<n.length;t++)e(t);var a,r=document.createElement("p"),d=document.getElementsByClassName("panier")[0].children[0],l=0;if(void 0==localStorage.donn){var o=[];localStorage.donn=[]}else{for(var o=JSON.parse(localStorage.donn),t=0;t<o.length;t++)l+=parseFloat(o[t].prix);textPan=document.createTextNode("Total : "+l.toFixed(2)+" â‚¬");var i=document.createElement("p");i.appendChild(textPan)}if(a=0==o.length?document.createTextNode("Pas d'articles dans le panier"):document.createTextNode(JSON.parse(localStorage.donn).length+" article(s) dans le panier"),r.appendChild(a),d.appendChild(r),d.appendChild(i),"Etudes et vie - Panier"==document.title)if(localStorage.donn.length>2){var c=JSON.parse(localStorage.donn),p=0,m=document.createElement("ul");document.getElementsByTagName("section")[0].children[0].appendChild(m);for(var h=0;h<c.length;h++){var s=document.createElement("a"),u=document.createElement("span");u.appendChild(document.createTextNode(c[h].prix)),s.setAttribute("href","#"),s.appendChild(document.createTextNode("Retirer du panier"));var g=document.createElement("li");s.addEventListener("click",removeFromCart,!1);var v=document.createElement("h3");v.appendChild(document.createTextNode(c[h].title)),g.appendChild(v),g.appendChild(u),g.appendChild(s),m.appendChild(g),p+=parseFloat(c[h].prix)}var C=document.createElement("h3"),N=document.createElement("span");C.appendChild(document.createTextNode("Total")),N.appendChild(document.createTextNode(p.toFixed(2)));var f=document.createElement("li");f.appendChild(C),f.appendChild(N),m.appendChild(f)}else{var S=document.createElement("p");S.appendChild(document.createTextNode("Vous n'avez pas d'article dans votre panier.")),document.getElementsByTagName("section")[0].children[0].appendChild(S)}}function addToCart(e){e.preventDefault();var n=new Array;localStorage.donn&&(n=JSON.parse(localStorage.donn));for(var t=this.parentNode,a=t.children[0].innerHTML,r=t.children[1].children[1].innerHTML,d=t.children[1].children[2].innerHTML,l=t.children[1].children[0].src,o=0;o<n.length;o++)if(n[o].title==a)return;var i={title:a,prix:r,desc:d,img:l};n.push(i),localStorage.donn=JSON.stringify(n),location.reload()}function removeFromCart(e){e.preventDefault();var n=JSON.parse(localStorage.donn),t=this.parentNode,a=t.children[0].innerHTML;t.children[1].innerHTML;for(var r=0;r<n.length;r++)if(n[r].title==a)var d=r;n.splice(d,1),""==n&&(n.length=0,localStorage.donn=JSON.stringify(n)),localStorage.donn=JSON.stringify(n),location.reload()}window.onload=initialize();